<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - CastorFamily</title>

    <link rel="stylesheet" href="./css/site-institucional/index.css">
    <link rel="stylesheet" href="./css/site-institucional/simulador.css">
    <script src="./js/sessao.js"></script>

</head>

<body>

    <!-- navbar -->
    <header class="header">

        <div class="container">
            <div class="logo-area">
                <img src="./assets/imgs/logo-castor.png" alt="Logo Castor" class="logo">
                <h1 class="brand"><span>Castor</span>Family</h1>
            </div>
            <nav class="navbar">
                <ul class="menu-center">
                    <li><a href="./index.html">Home</a></li>
                    <li><a href="./galeria.html">Galeria</a></li>
                    <li><a href="./simulador.html" class="ativo">Simulador</a></li>
                    <li><a href="./desenvolvedor.html">Desenvolvedor</a></li>
                    <li><a href="./index.html#contato">Contato</a></li>

                </ul>
            </nav>
            <ul class="menu-right">
                <li><a href="./login.html" id="login">Login</a></li>
                <li><a href="./cadastro.html" id="cadastro">Cadastro</a></li>
            </ul>
        </div>

    </header>


    <div class="container-simulador">

        <!-- FORMULÁRIO ESQUERDO -->
        <div class="box">
            <h1>Ajude um Desbravador</h1>
            <h2>Faça parte do sonho do 1° Campori</h2>

            <label>Seu nome:</label>
            <input type="text" id="input_nome" placeholder="Digite seu nome">

            <label>Quantidade de desbravadores que deseja ajudar:</label>
            <input type="number" id="input_qtd" placeholder="Ex: 3">

            <label>Valor total que deseja doar (R$):</label>
            <input type="number" id="input_valor" placeholder="Ex: 200">

            <button onclick="calcularDoacao()">Simular</button>
        </div>

        <!-- RESULTADO DIREITO -->
        <div class="box">
            <h2>Meta do Projeto</h2>
            <p>• 1 inscrição para o Campori = <b>R$ 500</b></p>
            <p>• Ajude nossos jovens a viverem o maior evento do Clube!</p>

            <div id="resultado_calculo"></div>
        </div>

    </div>

    <footer class="footer">

        <div class="container-footer-top">
            <div class="redes-sociais">
                <h3>REDES SOCIAIS</h3> <br><br><br>
                <span><img src="./assets/icones/site-institucional/instagram_icon.png" alt="Instagram" height="25px">
                    @Clube_Castor</span>
                <br><br>
                <span><img src="./assets/icones/site-institucional/facebook_icon.png" alt="Facebook" height="25px">
                    @Clube_Castor</span>
                <br><br>
            </div>
            <div class="contato">
                <h3>CONTATO </h3> <br><br>
                <span><img src="./assets/icones/site-institucional/telefone_icon.png" alt="Telefone" height="30px">+55
                    11
                    965986160</span>
                <br><br>
                <span><img src="./assets/icones/site-institucional/email_icon.png" alt="Email"
                        height="30px">clubecastor@gmail.com</span> <br><br>
            </div>
            <div class="campo">
                <h3>CASTORFAMILY</h3> <br><br>
                <a href="./index.html"><span>Home</span></a> <br><br></a>
                <a href="./galeria.html"><span>Galeria</span> <br><br></a>
                <a href="./simulador.html"><span>Simulador</span> <br><br></a>
                <a href="./desenvolvedor.html"><span>Desenvolvedor</span> <br><br></a>

            </div>
            <div class="campo">
                <h3>MAPA DO SITE</h3>
                <br><br><br>
                <a href="#home"><span> Voltar ao topo</span></a>
                <br><br>
                <a href="#carrosel"><span>Carrosel</span></a>
                <br><br>
                <a href="#clube"><span>Clube Castor</span></a>
                <br><br>
                <a href="#campori"><span>Campori</span></a>
                <br><br>
                <a href="#voz-castor"><span>Voz do Castor</span></a>
                <br><br><br>
            </div>
        </div>
        <div class="container-footer-bottom">
            <img src="assets/imgs/logo-castor.png" alt="Logo Castor" height="90px">
            <p>Copyright © 2025 | CastorFamily</p>
            <span> <img src="./assets/icones/site-institucional/brasil_logo.png" alt="Logo Brasil" height="22px">Brasil
                Português</span>
        </div>

    </footer>

</body>

</html>

<script>

    const precoInscricao = 500;

    // Vetor que armazenará valores de doações anteriores
    let historicoDoacoes = [];


    // FUNÇÃO: Validar campos
    function validarCampos(nome, qtd, valor) {
        if (nome.trim() === "" || qtd <= 0 || valor <= 0) {
            return false;
        }
        return true;
    }


    // FUNÇÃO: Calcular valor por desbravador
    function calcularValorPorPessoa(valorTotal, qtd) {
        return valorTotal / qtd;
    }


    // FUNÇÃO: Encontrar maior ou menor valor já doado
    function calcularMaiorValor(lista) {
        let maior = lista[0];

        for (let i = 1; i < lista.length; i++) {
            if (lista[i] > maior) {
                maior = lista[i];
            }
        }
        return maior;
    }

    function calcularMenorValor(lista) {
        let menor = lista[0];

        for (let i = 1; i < lista.length; i++) {
            if (lista[i] < menor) {
                menor = lista[i];
            }
        }
        return menor;
    }


    // FUNÇÃO PRINCIPAL
    function calcularDoacao() {

        // Coleta dos inputs
        let nome = input_nome.value;
        let qtd = Number(input_qtd.value);
        let valor = Number(input_valor.value);

        // Verificar se dados são válidos
        if (!validarCampos(nome, qtd, valor)) {
            alert("Por favor, preencha corretamente todos os campos.");
            return;
        }

        // Recorde no vetor
        historicoDoacoes.push(valor);

        // Operações matemáticas
        let valorPorPessoa = calcularValorPorPessoa(valor, qtd);
        let valorNecessario = precoInscricao * qtd;
        let percentual = (valor / valorNecessario) * 100;

        // Condicional sobre progresso
        let mensagemProgresso = "";
        if (percentual >= 100) {
            mensagemProgresso = "Parabéns! Você patrocinou todas as inscrições!";
        } else if (percentual >= 50) {
            mensagemProgresso = "Ótima ajuda! Você cobriu mais da metade!";
        } else {
            mensagemProgresso = "Toda ajuda faz diferença!";
        }

        // Laço de repetição para exibir todas as doações do vetor
        let listaTexto = "";
        for (let i = 0; i < historicoDoacoes.length; i++) {
            listaTexto += `• R$ ${historicoDoacoes[i]}<br>`;
        }

        // Resultado 
        resultado_calculo.innerHTML = `
        <h3>Resultado da Simulação</h3>
        <p><b>Nome:</b> ${nome}</p>
        <p><b>Desbravadores ajudados:</b> ${qtd}</p>
        <p><b>Valor total doado:</b> R$ ${valor}</p>
        <p><b>Valor por desbravador:</b> R$ ${valorPorPessoa.toFixed(2)}</p>
        <p><b>Percentual da meta atingido:</b> ${percentual.toFixed(1)}%</p>
        <p><b>Status:</b> ${mensagemProgresso}</p>

        <br>
        <h3>Histórico de Doações</h3>
        ${listaTexto}

        <br>
        <p><b>Maior doação:</b> R$ ${calcularMaiorValor(historicoDoacoes)}</p>
        <p><b>Menor doação:</b> R$ ${calcularMenorValor(historicoDoacoes)}</p>`;

    }

</script>